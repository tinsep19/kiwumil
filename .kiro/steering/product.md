# プロダクト指針（Product Steering）

## 目的（Purpose）
Kiwumil は、UML 風ダイアグラムをコードで記述し、手作業のピクセル調整ではなく制約でレイアウトを整えるための TypeScript ライブラリです。

## コア価値（Core Value）
- テキストファーストの記述スピードを維持しつつ、意図的なレイアウト制御を可能にする。
- 自動解決（solver）とユーザー提供のレイアウトヒントのバランスを取る。
- プラグインベースの名前空間により、拡張時の使い勝手（ergonomics）を高く保つ。

## 中核機能（Core Capabilities）
- `TypeDiagram(...).use(...).layout(...).render(...)` の fluent フローで図を構築できる。
- プラグイン名前空間（`el.<plugin>.*`, `rel.<plugin>.*`）でシンボルと関係を定義できる。
- ヒント API（arrange/align/enclose/guide/grid 系）でレイアウト意図を指定できる。
- 最終出力を SVG として、ファイルまたはブラウザ要素へレンダリングできる。

## 主な利用者（Primary Users）
- 図定義をバージョン管理・コードレビューしたい開発者やアーキテクト。
- 再利用可能な図規約と、プラグインによるドメイン拡張を必要とするチーム。

## プロダクト原則（Product Principles）
- API は型安全（type-safe）かつ IntelliSense 優先を維持する。
- レイアウト API は低レベルな solver 操作ではなく、意図（何を揃えるか／囲むか）を表現する。
- プラグイン追加後も、コア DSL と同じ操作感を保つ。

## 非目標（Non-Goals）
- フル機能の WYSIWYG エディタを提供すること。
- 手動ピクセル調整を主たる操作モデルにすること。
- 単一図法へ強く結合し、プラガブルな拡張性を損なうこと。

## メタデータ（Metadata）
- updated_at: 2026-02-15
- sync_note: プロダクトレベルのドリフトは未検出。既存パターンは現行コードベースと整合している。
