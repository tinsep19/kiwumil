[English](philosophy-concise.md) | 日本語

# kiwumil — 設計思想（簡潔版）

### セマンティクスを最優先にする DSL

kiwumil は、要素や関係のセマンティクスを保持しつつ、関係性に基づくレイアウトと微調整で見た目を向上させるための DSL です。

### 既存ツールの成果を尊重する

PlantUML や Mermaid は、意味記述から図を生成する点で有効です。kiwumil はその前提を維持します：意味を書けば読みやすい図が得られる。

### 残る課題: 「きれいさ」をどう担保するか

自動レイアウトは可読性を保証しますが、ラベルサイズやステレオタイプ差などの細部の不整合は自動化だけでは解消しにくいです。

### kiwumil の立場

- 初期に細かな数値を要求しない
- 必要に応じて意味を壊さない形で微調整を許容する
- セマンティックな自動レイアウトと Hint による微調整を分離する

### Characs の役割

各 Symbol は `characs.bounds` を持ち、Characs は `icon.center` や `stereotype.top` のような意味付きアンカーとして機能します。数値ではなく「何を揃えるか」を表現します。

### Hint API の思想

- 絶対座標を指示する API ではない
- 意味のある数値（マージン、パディング等）は扱う
- 「ここに置け」ではなく「こう揃えたい」を表現する

### 配置の方針

1. `figure` / `grid` で大まかな構造を作る（enclose）
2. `align` / `arrange` で細部を整える（中心・端・基準線）

### エディタ支援の役割

layout, icon, stereotype, label といった意味のある部位のみを公開し、内部の変数や座標は露出しません。IntelliSense は調整可能な部位を提示します。

### コアの要約

- セマンティクスを最優先
- 自動レイアウトを基盤とする
- 視覚品質の中心は「整列」
- 細部調整は opt-in

kiwumil は、意味を壊さずに図を「もう一歩きれいにする」ための設計基盤です。
